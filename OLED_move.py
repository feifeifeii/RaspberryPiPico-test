# Display Image & text on I2C driven ssd1306 OLED display 
from machine import Pin, I2C
from ssd1306 import SSD1306_I2C
import framebuf
from time import sleep


sda=machine.Pin(12)
scl=machine.Pin(13)
width=128
height=32
#i2c = machine.I2C(0, scl=scl, sda=sda, freq=400000)
#oled = SSD1306_I2C(width, height, i2c)                  # Init oled display
i2c = I2C(0, sda=Pin(12), scl=Pin(13), freq=40000)
oled = SSD1306_I2C(128, 32, i2c)
# Raspberry Pi logo as CAR

buffer = bytearray(b"\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x18\x00\x00\xc0\
\x00\x3e\x00\x01\xb0\
\x00\x63\x00\x03\x18\
\x00\x41\x00\x02\x48\
\x00\x55\x00\x02\x28\
\x00\x63\x00\x03\x98\
\x00\x3f\xff\xff\xf0\
\x00\x0c\x00\x00\x60\
\x00\x08\x00\x00\x40\
\x00\x08\x30\x30\x40\
\x00\x08\x37\x30\x60\
\x00\x08\x1d\xe0\x40\
\x00\x08\x23\x30\x40\
\x00\x08\x50\x10\x40\
\x00\x08\xca\x88\x60\
\x00\x08\x40\x88\x40\
\x00\x08\x44\x18\x40\
\x00\x08\x61\x30\x40\
\x00\x08\x1c\xe0\x60\
\x01\x88\x07\x00\x46\
\x03\xc8\xc0\x08\x4f\
\x02\x38\x40\x08\x79\
\x02\x18\xc0\x08\x61\
\x02\x08\xc0\x08\x41\
\x02\x08\x40\x08\x41\
\x02\x8a\x40\x09\x41\
\x03\x0b\x60\x1a\x61\
\x03\xff\xff\xff\xff\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00")  #42,48

fb = framebuf.FrameBuffer(buffer, 40, 45, framebuf.MONO_HLSB)
oled.fill(0)

# Blit the image from the framebuffer to the oled display
oled.blit(fb, 30, 0)

# Add some text
#oled.text("Raspberry Pi",5,5)
#oled.text("Pico",5,15)

# Finally update the oled display so the image & text is displayed
oled.show()
sleep(1)
oled.fill(0)
oled.show()
sleep(2)

x=0
y=0
while True:
    #x=(x+1)% width
    x+=1
    if x>=128 :
        x=0
    y=0#(y+3)% height
    print(x)
    oled.fill(0)
    oled.blit(fb, x, y)
    #oled.blit(fb, x-width, y)
#    oled.blit(fb, x, y-height)
#    oled.blit(fb, x-width, y-height)
    oled.show()
    sleep(0.01)
   